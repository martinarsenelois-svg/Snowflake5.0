:root{
  --accent:#7e57c2;
  --glass:rgba(255,255,255,0.7);
  --bg1:#b3e5fc;
  --bg2:#7e57c2;
}

/* Reset + layout */
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif}
body{
  display:flex;flex-direction:column;align-items:center;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  transition:background .4s;overflow:hidden;
}

/* Dark */
body.dark{background:linear-gradient(135deg,#0b0b0b,#22223b);color:#fff}

/* Snow canvas */
#snow{position:fixed;inset:0;pointer-events:none;z-index:0}

/* Topbar */
.topbar{z-index:6;position:sticky;top:12px;width:94%;max-width:900px;margin:8px;border-radius:14px;padding:8px 12px;display:flex;justify-content:space-between;align-items:center;background:rgba(255,255,255,0.6);backdrop-filter:blur(6px);box-shadow:0 8px 24px rgba(0,0,0,0.12)}
body.dark .topbar{background:rgba(14,14,20,0.5)}
.topbar img{width:40px;height:40px;border-radius:10px;margin-right:8px}
.topbar .left{display:flex;align-items:center}
.topbar button{background:transparent;border:none;font-size:16px;cursor:pointer;padding:6px;border-radius:8px}

/* Panels */
.panel{z-index:6;background:var(--glass);border-radius:14px;padding:14px;width:94%;max-width:420px;margin-top:18px;box-shadow:0 10px 30px rgba(0,0,0,0.12)}
.center{text-align:center}
.row{display:flex;gap:8px;margin-top:10px}
.row input{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.08)}
.row button{padding:10px 12px;border-radius:10px;border:none;background:var(--accent);color:#fff;cursor:pointer}
.muted{color:rgba(0,0,0,0.45);font-size:13px}

/* Chat screen */
#chat-screen{z-index:5;width:94%;max-width:900px;height:78vh;margin-top:14px;background:rgba(255,255,255,0.6);backdrop-filter:blur(6px);border-radius:14px;padding:12px;display:flex;flex-direction:column}
.messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:8px}
.typing{height:18px;padding-left:8px;color:rgba(0,0,0,0.6);font-size:13px}

/* Composer */
.composer{display:flex;gap:8px;align-items:center;padding:10px;border-radius:12px;background:rgba(255,255,255,0.85)}
.composer input[type="text"]{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.08)}
.composer button{padding:10px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,#9f7ae6,#7e57c2);color:#fff;cursor:pointer}

/* Message bubbles */
.msg{max-width:70%;padding:10px;border-radius:16px;position:relative;animation:pop .12s ease;word-wrap:break-word;box-shadow:0 4px 14px rgba(0,0,0,0.06)}
.msg.me{margin-left:auto;background:linear-gradient(180deg,var(--accent),#5b3ea6);color:#fff;border-bottom-right-radius:4px}
.msg.other{margin-right:auto;background:rgba(255,255,255,0.92);border:1px solid rgba(0,0,0,0.04)}
.msg .meta{font-size:11px;opacity:0.85;margin-top:6px;display:flex;gap:8px;align-items:center}
.msg img{max-width:220px;border-radius:10px;display:block}
.tick{font-size:12px;opacity:0.9}

/* small helpers */
.hidden{display:none}
.error{color:#d9534f;margin-top:8px}
@keyframes pop{from{transform:translateY(6px);opacity:0}to{transform:none;opacity:1}}

/* Responsive */
@media (max-width:600px){
  .topbar{width:98%}
  .panel{width:98%}
  #chat-screen{height:86vh;width:98%}
}